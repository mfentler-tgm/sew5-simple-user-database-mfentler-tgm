language: python
matrix:
  include:
    - language: python
      python:
      - 3.7-dev
      install:
        - pip install -r requirements_flask.txt
        - pip install tox
      before_script:
        - cd $TRAVIS_BUILD_DIR/src/main/vue/client
        - npm run server & sleep 20
        - cd $TRAVIS_BUILD_DIR
      script:
        - tox

    - language: generic
      python:
        - 3.7-dev
      dist: xenial
      install:
        - cd $TRAVIS_BUILD_DIR
        - pip install -r requirements.txt --user
        - cd $TRAVIS_BUILD_DIR/src/main/vue/client
        - npm install
        - npm install wait-on
      before-script:
        - cd $TRAVIS_BUILD_DIR/src/main/vue/client
      script:
        - npm start & sleep 20
        - npm run server & sleep 20
        - node_modules/.bin/cypress run